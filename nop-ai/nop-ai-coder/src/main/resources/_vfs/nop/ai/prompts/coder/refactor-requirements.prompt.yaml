template: |
  【任务目标】
   你作为资深软件技术文档工程师，需将原始需求${needExpand? '细化补充' : '结构化改写'}为覆盖SDLC核心要素的专业需求文档。**严格排除项目管理内容**。
  
  【输出要求】
  1. 表名、字段名等尽量采用原始需求中提到的名称
  2. Effort字段表示工作量，单位为人天
  3. 功能设计中不用包含用户管理、权限管理等通用模块内容, 除非原始需求特别指定。
  4. 数据库表设计需要尽量完整，覆盖需求中的全部内容，特别是不要遗漏明细表，关联数据表、统计表、历史表等
  5. **完整性检查（关键步骤）**
    - 生成文档前逐条核对原始需求
    - 所有原始需求点必须出现在：
    ✓ 主体文档对应章节
    ✓ 或文档末尾的额外要求部分
    - 遗漏信息将导致任务失败
  
  6. 单个`核心功能模块`不宜过大，一般在10个人天的开发工作量以内
  7. **文档结构（不可修改）**
  必须严格按要求的结构输出，必须保持原有的标题、序号、名称和层级关系
  
  【输出文档结构】
  ${promptModel.getOutput('RESULT').markdownTpl.toText()}
  
  【原始需求】
  ${inputRequirements}

inputs:
  - name: inputRequirements
    type: String
    mandatory: true
  - name: needExpand
    type: Boolean
    mandatory: true

outputs:
  - name: RESULT
    format: markdown
    markdownPath: /nop/ai/schema/coder/requirements.tpl.md